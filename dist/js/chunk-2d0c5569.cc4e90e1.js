(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5569"],{"3f55":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ma-5"},[a("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{small:"",color:"amber darken-3",dark:""},on:{click:t.addNew}},"v-btn",r,!1),o),[t._v(" Ajouter un article ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticClass:"pb-2 pr-2"},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Ajouter un article")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Nom"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Marque"},model:{value:t.product.mark,callback:function(e){t.$set(t.product,"mark",e)},expression:"product.mark"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Prix"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-btn",{staticClass:"amber darken-3",attrs:{small:"",block:""},on:{click:t.onPickImage}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-cloud-upload ")]),t._v(" Importer les photos ")],1),a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.uploadImage}})],1)],1),a("v-row",{staticClass:"mt-1"},t._l(t.product.images,(function(e,o){return a("div",{key:o},[a("v-col",[a("v-img",{attrs:{"max-height":"100","max-width":"150",src:e}}),a("v-btn",{attrs:{color:"grey lighten-1",fab:"","x-small":""},on:{click:function(a){return t.deleteImage(e,o)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-delete")])],1)],1)],1)})),0)],1)],1),a("v-card-actions",{},[a("v-spacer"),a("v-btn",{attrs:{color:"grey lighten-1",text:""},on:{click:t.close}},[t._v("Annuler")]),"new"==t.mode?a("v-btn",{attrs:{color:"amber darken-3",text:""},on:{click:t.addProduct}},[t._v(" Ajouter ")]):t._e(),"edit"==t.mode?a("v-btn",{attrs:{color:"amber darken-3",text:""},on:{click:t.updateProduct}},[t._v(" Modifier ")]):t._e()],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,"item-key":"product"},scopedSlots:t._u([{key:"item.actions",fn:function(e){return[a("td",{},[a("v-btn",{attrs:{color:"green lighten-2",dark:"",icon:""},on:{click:function(a){return t.editProduct(e.item)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1),a("v-btn",{attrs:{color:"red lighten-2",dark:"",icon:""},on:{click:function(a){return t.deleteProduct(e.item)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)],1)]}}])})],1)},r=[],n=(a("a434"),a("b0c0"),a("dc59")),i=a("3d20"),c=a.n(i),l={name:"ProductList",data:function(){return{product:{name:null,mark:null,price:null,images:[]},products:[],dialog:!1,mode:null,headers:[{text:"Nom",align:"start",value:"name",sortable:!1},{text:"Marque",value:"mark"},{text:"Prix",value:"price"},{text:"Actions",value:"actions",sortable:!1}]}},firestore:function(){return{products:n["b"].collection("products")}},methods:{deleteImage:function(t,e){var a=n["c"].storage().refFromURL(t);this.product.images.splice(e,1),a.delete().then((function(){console.log("image deleted")})).catch((function(t){console.log(t)}))},onPickImage:function(){this.$refs.fileInput.click()},uploadImage:function(t){var e=this,a=t.target.files[0],o=n["c"].storage().ref("products/"+a.name),r=o.put(a);r.on("state_changed",(function(t){console.log(t)}),(function(t){console.log(t)}),(function(){r.snapshot.ref.getDownloadURL().then((function(t){e.product.images.push(t),console.log("File available at",t)}))}))},reset:function(){this.product={name:null,mark:null,price:null,images:[]}},addNew:function(){this.mode="new",console.log(this.mode),this.reset()},addProduct:function(){this.$firestore.products.add(this.product),this.close()},editProduct:function(t){this.mode="edit",this.product=t,this.dialog=!0},updateProduct:function(){this.$firestore.products.doc(this.product.id).update(this.product),this.dialog=!1},deleteProduct:function(t){var e=this;c.a.fire({title:"Êtes-vous sûr ?",text:"Vous ne pourrez pas revenir en arrière !",icon:"warning",showCancelButton:!0,cancelButtonColor:"#FF6F00",confirmButtonColor:"#BDBDBD",confirmButtonText:"Oui, supprimez-le !"}).then((function(a){a.isConfirmed&&(e.$firestore.products.doc(t.id).delete(),c.a.fire("Supprimé !","Votre produit a été supprimé.","success"))}))},closeEdit:function(){this.dialogEdit=!1},close:function(){this.dialog=!1}},created:function(){}},s=l,d=a("2877"),u=a("6544"),m=a.n(u),p=a("8336"),f=a("b0af"),v=a("99d9"),g=a("62ad"),h=a("a523"),b=a("8fea"),k=a("169a"),x=a("0e8f"),_=a("132d"),w=a("adda"),V=a("a722"),C=a("0fd9"),P=a("2fa4"),y=a("8654"),I=Object(d["a"])(s,o,r,!1,null,"625dbe65",null);e["default"]=I.exports;m()(I,{VBtn:p["a"],VCard:f["a"],VCardActions:v["a"],VCardText:v["c"],VCardTitle:v["d"],VCol:g["a"],VContainer:h["a"],VDataTable:b["a"],VDialog:k["a"],VFlex:x["a"],VIcon:_["a"],VImg:w["a"],VLayout:V["a"],VRow:C["a"],VSpacer:P["a"],VTextField:y["a"]})}}]);
//# sourceMappingURL=chunk-2d0c5569.cc4e90e1.js.map